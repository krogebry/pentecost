{
  "Resources": {

    "PrimarySubnet": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "Tags": [ {"Key": "Name", "Value": "prismprimary" } ],
        "VpcId": { "Ref": "VPC" },
        "CidrBlock": { "Fn::FindInMap": [ "SubnetConfig", "Primary", "CIDR" ]},
        "AvailabilityZone": "us-east-1b"
      }
    },
    "PrimaryRouteTable": {
      "Type": "AWS::EC2::RouteTable",
      "Properties": { "VpcId": { "Ref": "VPC" } }
    },
    "PrimaryRouteOnPrimarySubnet": {
      "Type": "AWS::EC2::Route",
      "Properties": {
        "GatewayId": { "Ref": "InternetGateway" },
        "RouteTableId": { "Ref": "PrimaryRouteTable" },
        "DestinationCidrBlock": "0.0.0.0/0"
      }
    },
    "PrimarySubnetRouteTableAssociation": {
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
      "Properties": {
        "SubnetId": { "Ref": "PrimarySubnet" },
        "RouteTableId": { "Ref": "PrimaryRouteTable" }
      }
    },
    "PrimarySubnetAcl": {
      "Type": "AWS::EC2::NetworkAcl",
      "Properties": { 
        "Tags": [ {"Key": "Name", "Value": "prismprimary" } ],
        "VpcId": { "Ref": "VPC" } 
      }
    },
    /**
     * Bind the ACL container to the public subnet object.
     * This will apply the ACL rules to the subnet.
     */
    "PrimarySubnetNetworkAclAssociation": {
      "Type": "AWS::EC2::SubnetNetworkAclAssociation",
      "Properties": {
        "SubnetId": { "Ref": "PrimarySubnet" },
        "NetworkAclId": { "Ref": "PrimarySubnetAcl" }
      }
    }
  }
}
